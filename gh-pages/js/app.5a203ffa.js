(function(){"use strict";var e={1349:function(e,t,o){var n=o(3751),i=o(641);const a={id:"app"};function r(e,t,o,n,r,s){const c=(0,i.g2)("WhiteCubeRoom");return(0,i.uX)(),(0,i.CE)("div",a,[(0,i.bF)(c)])}const s={ref:"threeContainer",class:"three-container"},c={key:0,class:"landscape-prompt"},d={key:1,class:"controls"};function h(e,t,o,n,a,r){const h=(0,i.g2)("UploadMenu");return(0,i.uX)(),(0,i.CE)("div",null,[(0,i.Lk)("div",s,null,512),a.showLandscapePrompt?((0,i.uX)(),(0,i.CE)("div",c," Please rotate your device to landscape mode. ")):(0,i.Q3)("",!0),a.isMobile?((0,i.uX)(),(0,i.CE)("div",d,[(0,i.Lk)("button",{class:"control-btn up",onTouchstart:t[0]||(t[0]=t=>e.onMoveStart("forward")),onTouchend:t[1]||(t[1]=t=>e.onMoveEnd("forward"))},"↑",32),(0,i.Lk)("button",{class:"control-btn left",onTouchstart:t[2]||(t[2]=t=>e.onMoveStart("left")),onTouchend:t[3]||(t[3]=t=>e.onMoveEnd("left"))},"←",32),(0,i.Lk)("button",{class:"control-btn down",onTouchstart:t[4]||(t[4]=t=>e.onMoveStart("backward")),onTouchend:t[5]||(t[5]=t=>e.onMoveEnd("backward"))},"↓",32),(0,i.Lk)("button",{class:"control-btn right",onTouchstart:t[6]||(t[6]=t=>e.onMoveStart("right")),onTouchend:t[7]||(t[7]=t=>e.onMoveEnd("right"))},"→",32)])):(0,i.Q3)("",!0),a.isMobile?((0,i.uX)(),(0,i.CE)("button",{key:2,onClick:t[8]||(t[8]=(...e)=>r.toggleUploadMenu&&r.toggleUploadMenu(...e))},"Upload Files")):(0,i.Q3)("",!0),a.showUploadMenu?((0,i.uX)(),(0,i.Wv)(h,{key:3,onUpload:r.handleUpload},null,8,["onUpload"])):(0,i.Q3)("",!0)])}o(4114),o(4603),o(7566),o(8721);var u=o(9437),l=o(9318);const w={class:"upload-menu"};function p(e,t,o,n,a,r){return(0,i.uX)(),(0,i.CE)("div",w,[(0,i.Lk)("input",{type:"file",onChange:t[0]||(t[0]=(...e)=>r.handleFileUpload&&r.handleFileUpload(...e))},null,32)])}var m={methods:{handleFileUpload(e){const t=e.target.files[0];this.$emit("upload",t)}}},v=o(6262);const b=(0,v.A)(m,[["render",p]]);var g=b,f={name:"WhiteCubeRoom",components:{UploadMenu:g},data(){return{showLandscapePrompt:!1,isMobile:!1,showUploadMenu:!1,move:{forward:!1,backward:!1,left:!1,right:!1},touchStart:{x:0,y:0},objects:[]}},mounted(){this.checkOrientation(),window.addEventListener("resize",this.checkOrientation),window.addEventListener("orientationchange",this.checkOrientation),this.initThreeJS(),this.loadObjects(),window.addEventListener("keydown",this.handleKeydown)},methods:{checkOrientation(){this.isMobile=/Mobi|Android/i.test(navigator.userAgent),this.isMobile&&window.innerHeight>window.innerWidth?this.showLandscapePrompt=!0:this.showLandscapePrompt=!1},toggleUploadMenu(){this.showUploadMenu=!this.showUploadMenu,this.showUploadMenu?document.exitPointerLock():this.controls&&!1===this.controls.isLocked&&this.controls.lock()},handleKeydown(e){switch(e.key.toLowerCase()){case"u":this.toggleUploadMenu();break;case"c":this.clearObjects();break;default:break}},initThreeJS(){const e=this.$refs.threeContainer,t=new u.Z58,n=new u.ubm(75,window.innerWidth/window.innerHeight,.1,1e3);n.rotation.order="YXZ";const i=new u.JeP;i.setSize(window.innerWidth,window.innerHeight),e.appendChild(i.domElement);const a=new u.$p8(16777215);t.add(a);const r=new u.fTw(20,20);t.add(r);const s=new u.IzY(5);t.add(s);const c=new u.iNn(10,10,10),d=new u.V9B({color:16777215,side:u.hsX}),h=new u.eaF(c,d);t.add(h);const w=new u.Tap;w.load(o(852),(e=>{const o=e.image.width/e.image.height,a=4,r=a/o,s=new u.bdM(a,r),c=new u.V9B({map:e,transparent:!0,side:u.$EB}),d=new u.eaF(s,c);d.position.set(0,2,0),t.add(d);const h=()=>{requestAnimationFrame(h),this.move.forward&&p.moveForward(.1),this.move.backward&&p.moveForward(-.1),this.move.left&&p.moveRight(-.1),this.move.right&&p.moveRight(.1),d.rotation.y+=.01,i.render(t,n)};h()}));const p=new l.Z(n,i.domElement),m=()=>{console.error("Pointer lock error occurred.")};document.addEventListener("pointerlockerror",m),document.addEventListener("click",(()=>p.lock()));const v=this.move,b=e=>{switch(e.code){case"ArrowUp":case"KeyW":v.forward=!0;break;case"ArrowDown":case"KeyS":v.backward=!0;break;case"ArrowLeft":case"KeyA":v.left=!0;break;case"ArrowRight":case"KeyD":v.right=!0;break}},g=e=>{switch(e.code){case"ArrowUp":case"KeyW":v.forward=!1;break;case"ArrowDown":case"KeyS":v.backward=!1;break;case"ArrowLeft":case"KeyA":v.left=!1;break;case"ArrowRight":case"KeyD":v.right=!1;break}};document.addEventListener("keydown",b),document.addEventListener("keyup",g);const f=e=>{this.touchStart.x=e.touches[0].clientX,this.touchStart.y=e.touches[0].clientY},k=e=>{const t=e.touches[0].clientX-this.touchStart.x,o=e.touches[0].clientY-this.touchStart.y;n.rotation.y-=.002*t,n.rotation.x-=.002*o,n.rotation.x=Math.max(-Math.PI/2,Math.min(Math.PI/2,n.rotation.x)),this.touchStart.x=e.touches[0].clientX,this.touchStart.y=e.touches[0].clientY};document.addEventListener("touchstart",f),document.addEventListener("touchmove",k);const y=()=>{requestAnimationFrame(y),this.move.forward&&p.moveForward(.1),this.move.backward&&p.moveForward(-.1),this.move.left&&p.moveRight(-.1),this.move.right&&p.moveRight(.1),i.render(t,n)};y(),window.addEventListener("resize",(()=>{n.aspect=window.innerWidth/window.innerHeight,n.updateProjectionMatrix(),i.setSize(window.innerWidth,window.innerHeight)})),n.position.set(0,2,5),this.scene=t,this.camera=n,this.renderer=i},handleUpload(e){const t=URL.createObjectURL(e),o=e.name.split(".").pop().toLowerCase();switch(o){case"jpg":case"jpeg":case"png":case"gif":this.addImage(t);break;case"mp3":case"wav":this.addAudio(t);break;case"gltf":case"glb":this.addModel(t);break;default:console.error("Unsupported file type")}this.showUploadMenu=!1,this.controls&&this.controls.lock()},addImage(e){const t=new u.Tap;t.load(e,(t=>{const o=t.image.width/t.image.height,n=new u.bdM(2,2/o),i=new u.V9B({map:t,side:u.$EB}),a=new u.eaF(n,i),r=5,s=new u.Pq0(0,0,-r);s.applyQuaternion(this.camera.quaternion),a.position.copy(this.camera.position).add(s),a.lookAt(this.camera.position),this.scene.add(a),this.objects.push({type:"image",url:e,position:a.position.clone(),uuid:a.uuid}),this.saveObjects()}))},addAudio(e){const t=new Audio(e),o=new u.iNn(.5,.5,.5),n=new u.V9B({color:65280}),i=new u.eaF(o,n);i.position.set(10*Math.random()-5,0,10*Math.random()-5),i.userData={onClick:()=>t.play()},this.scene.add(i),this.objects.push({type:"audio",url:e,position:i.position.clone(),uuid:i.uuid}),this.saveObjects()},addModel(e){const t=new u.GLTFLoader;t.load(e,(t=>{t.scene.position.set(10*Math.random()-5,0,10*Math.random()-5),this.scene.add(t.scene),this.objects.push({type:"model",url:e,position:t.scene.position.clone(),uuid:t.scene.uuid}),this.saveObjects()}))},saveObjects(){localStorage.setItem("threejs-objects",JSON.stringify(this.objects))},loadImageFromData(e){const t=new u.Tap;t.load(e.url,(t=>{const o=t.image.width/t.image.height,n=new u.bdM(2,2/o),i=new u.V9B({map:t,side:u.$EB}),a=new u.eaF(n,i);a.position.copy(e.position),this.scene.add(a);const r=()=>{requestAnimationFrame(r),a.rotation.y+=.01};r()}))},loadAudioFromData(e){const t=new Audio(e.url),o=new u.iNn(.5,.5,.5),n=new u.V9B({color:65280}),i=new u.eaF(o,n);i.position.copy(e.position),i.userData={onClick:()=>t.play()},this.scene.add(i)},loadModelFromData(e){const t=new u.GLTFLoader;t.load(e.url,(t=>{t.scene.position.copy(e.position),this.scene.add(t.scene)}))},loadObjects(){const e=localStorage.getItem("threejs-objects");e&&(this.objects=JSON.parse(e),this.objects.forEach((e=>{switch(e.type){case"image":this.loadImageFromData(e);break;case"audio":this.loadAudioFromData(e);break;case"model":this.loadModelFromData(e);break}})))},clearObjects(){this.objects.forEach((e=>{const t=this.scene.getObjectByProperty("uuid",e.uuid);t&&this.scene.remove(t)})),this.objects=[],localStorage.removeItem("threejs-objects")}},beforeUnmount(){window.removeEventListener("resize",this.checkOrientation),window.removeEventListener("orientationchange",this.checkOrientation),document.removeEventListener("pointerlockerror",this.onPointerLockError),document.removeEventListener("keydown",this.onKeyDown),document.removeEventListener("keyup",this.onKeyUp),document.removeEventListener("touchstart",this.onTouchStart),document.removeEventListener("touchmove",this.onTouchMove),window.removeEventListener("keydown",this.handleKeydown)}};const k=(0,v.A)(f,[["render",h]]);var y=k,M={name:"App",components:{WhiteCubeRoom:y}};const L=(0,v.A)(M,[["render",r]]);var E=L;(0,n.Ef)(E).mount("#app")},852:function(e,t,o){e.exports=o.p+"img/megaworld.f0fc96be.png"}},t={};function o(n){var i=t[n];if(void 0!==i)return i.exports;var a=t[n]={exports:{}};return e[n].call(a.exports,a,a.exports,o),a.exports}o.m=e,function(){var e=[];o.O=function(t,n,i,a){if(!n){var r=1/0;for(h=0;h<e.length;h++){n=e[h][0],i=e[h][1],a=e[h][2];for(var s=!0,c=0;c<n.length;c++)(!1&a||r>=a)&&Object.keys(o.O).every((function(e){return o.O[e](n[c])}))?n.splice(c--,1):(s=!1,a<r&&(r=a));if(s){e.splice(h--,1);var d=i();void 0!==d&&(t=d)}}return t}a=a||0;for(var h=e.length;h>0&&e[h-1][2]>a;h--)e[h]=e[h-1];e[h]=[n,i,a]}}(),function(){o.d=function(e,t){for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){o.p="/meganew/"}(),function(){var e={524:0};o.O.j=function(t){return 0===e[t]};var t=function(t,n){var i,a,r=n[0],s=n[1],c=n[2],d=0;if(r.some((function(t){return 0!==e[t]}))){for(i in s)o.o(s,i)&&(o.m[i]=s[i]);if(c)var h=c(o)}for(t&&t(n);d<r.length;d++)a=r[d],o.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return o.O(h)},n=self["webpackChunkmegatest"]=self["webpackChunkmegatest"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var n=o.O(void 0,[504],(function(){return o(1349)}));n=o.O(n)})();
//# sourceMappingURL=app.5a203ffa.js.map